
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Slider</title>
<style>
*, *::after, *::before{
	margin: 0;
	padding: 0;
	box-sizing: border-box;
}

html{
	font-size: 10px;
}

body{
    font-size: 1.6rem;
  	-webkit-font-smoothing: antialiased;
  	-moz-osx-font-smoothing: grayscale;	
}

code {
  font-family: source-code-pro, Menlo, Monaco, Consolas, 'Courier New',
    monospace;
}

.slider{
    display: block;
    overflow-x: hidden;
}

.slider-wrapper{
    display: flex;
    width: 100%;
    overflow-x: visible;
    transition-property: transform;
    transition-duration: 0ms;
}

.slider-item{
    flex-shrink: 0;
    width: 100%;
}
    </style>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
</head>

<body>

<div class="slider" id="testslider" style="width: 40rem;">
    <div class="slider-wrapper">
        <div class="slider-item">
            <img src="img_chania.jpg" style="width: 100%;">
        </div>
        <div class="slider-item">
            <img src="img_chania2.jpg" style="width: 100%;">
        </div>
        <div class="slider-item">
            <img src="img_flower.jpg" style="width: 100%;">
        </div>
        <div class="slider-item">
            <img src="img_flower2.jpg" style="width: 100%;">
        </div>                        
    </div>
</div>

<button type="button" id="prev">prev</button>
<button type="button" id="next">next</button>

<script defer>

class Slider{
    constructor(slider_id, slide_dur = 300){
        this.slider = $('#'+slider_id);
        
        if(this.slider.length){
            this.wrapper = this.slider.children();
            this.items_l = this.wrapper.children().length;
            this.slide_dur = slide_dur+'ms';
            this.current_item = 1;
            this.is_animating = false;

            this.init = this.init.bind(this);
            this.prev = this.prev.bind(this);
            this.next = this.next.bind(this);
            this.slide = this.slide.bind(this);
        }
    }

    init(prev_btn, next_btn){
        if(this.items_l > 1 && this.slider.length){
            const cloned_first = this.wrapper.children().first().clone();
            cloned_first.attr('aria-hidden', true);
    
            const cloned_last = this.wrapper.children().last().clone();
            cloned_last.attr('aria-hidden', true);
            
            this.wrapper.prepend(cloned_last);
            this.wrapper.append(cloned_first);
            this.wrapper.css('transform', 'translateX(-100%)');
            this.wrapper.on('transitionend webkitTransitionEnd mozTransitionEnd oTransitionEnd', () => {
                if(this.current_item === 0 || this.current_item === this.items_l + 1){
                    switch(this.current_item){
                        case 0: this.current_item = this.items_l; break;
                        case (this.items_l+1): this.current_item = 1; break;
                        default: null;        
                    }
                    this.wrapper.css({
                        transitionDuration: '0ms',
                        transform: 'translateX('+(-1*this.current_item)+'00%)',
                    });                
                }
                this.is_animating = false
            });
            $(prev_btn).click(() => { this.prev(); });
            $(next_btn).click(() => { this.next(); });
        }
    }

    next(){
        if(!this.is_animating){
            ++this.current_item;
            this.slide(-1 * this.current_item);
        }
    }
    prev(){
        if(!this.is_animating){
            --this.current_item;
            this.slide(-1 * this.current_item);
        }
    }
    slide(pos){
        this.is_animating = true;
        this.wrapper.css({
            transitionDuration: this.slide_dur,
            transform: 'translateX('+pos+'00%)',
        });
    }
}

new Slider('testslider').init(
    '#prev', '#next'
);

</script>
</body>

</html>